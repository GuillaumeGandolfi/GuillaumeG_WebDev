---
import { Image } from 'astro:assets';
import logo from '../assets/logo/logo.webp';

import '../assets/css/header.css';
---
<header class="header">
  <div class="header-container">
    <a href="/" class="header-logo" aria-label="Revenir en haut de page">
      <Image src={logo} width="70" height="60" alt="Logo du site" loading="eager" />
    </a>
    
    <button class="menu-toggle" aria-label="Ouvrir le menu">
      <span class="burger-line"></span>
      <span class="burger-line"></span>
      <span class="burger-line"></span>
    </button>

    <nav class="header-nav" aria-label="Navigation principale">
      <a href="#about" title="En savoir plus sur moi">√Ä propos</a>
      <a href="#skills" title="D√©couvrir mes comp√©tences">Comp√©tences</a>
      <a href="#portfolio" title="Voir mes projets">Projets</a>
      <a href="#how-i-work" title="Comprendre ma m√©thode de travail">M√©thode</a>
      <a href="#contact" title="Me contacter">Contact</a>
    </nav>
  </div>
</header>

<script>
  // @ts-nocheck
  if (typeof document !== "undefined") {
  const menuToggle = document.querySelector(".menu-toggle");
  const headerNav = document.querySelector(".header-nav");
  const navLinks = document.querySelectorAll(".header-nav a"); // S√©lection des liens

  // Toggle du menu mobile avec animation du burger
  if (menuToggle && headerNav) {
    menuToggle.addEventListener("click", () => {
      headerNav.classList.toggle("active");
      menuToggle.classList.toggle("active"); // Active l'animation du burger
    });

    // üîπ Ferme le menu quand un lien est cliqu√© (sur mobile uniquement)
    navLinks.forEach((link) => {
      link.addEventListener("click", () => {
        if (window.innerWidth <= 768) {
          headerNav.classList.remove("active");
          menuToggle.classList.remove("active");
        }
      });
    });
  } else {
    console.error("Menu toggle or navigation not found");
  }

  // Effet de scroll pour le header
  const header = document.querySelector(".header");
  const scrollThreshold = 100;

  if (header) {
    window.addEventListener("scroll", () => {
      if (window.scrollY > scrollThreshold) {
        header.classList.add("scrolled");
      } else {
        header.classList.remove("scrolled");
      }
    });
  }
}
</script>
