---
import BaseLayout from '../layouts/BaseLayout.astro';

import { Image } from "astro:assets";
import travauxSisters from "../assets/mockups/travaux_sisters.webp";
import bhbConseil from "../assets/mockups/bhb_conseil.webp";

import '../assets/css/hero.css';
import '../assets/css/about.css';
import '../assets/css/skill.css';
import '../assets/css/portfolio.css';
import '../assets/css/mywork.css';
import '../assets/css/contact.css';
---

<BaseLayout>
  <section class="hero" aria-labelledby="hero-title">
    <div class="hero-container">
      <h1 id="hero-title" class="hero-title">
        Je réalise des sites web <span class="highlight">performants</span> et 
        <span class="highlight">optimisés</span>,
        <br />
        pour transformer vos idées en une <span class="highlight">vitrine </span>professionnelle
        qui <span class="highlight">booste</span> votre visibilité.
      </h1>
      <a href="#contact" class="hero-cta" aria-label="Commencez votre projet avec moi" 
      title="Démarrez votre projet avec un site performant et optimisé">
        Démarrez votre projet
      </a>
    </div>
    <div class="hero-background" aria-hidden="true"></div>
  </section>
  
  

  <section class="about-me" id="about" aria-labelledby="about-title">
    <div class="about-container">
      <h2 id="about-title">À Propos de Moi</h2>
      <p>
        Bonjour, je m'appelle <strong>Guillaume</strong>, et je suis passionné par le <strong>développement web</strong>.
        Mon objectif est simple : concevoir des sites <strong>modernes</strong>, <strong>performants</strong> et <strong>adaptés</strong> à vos besoins.
      </p>
      <p>
        Avec une solide expertise en <em>HTML</em>, <em>CSS</em>, <em>JavaScript</em> et <em>React</em>,
        je mets en œuvre des solutions web <strong>rapides</strong> et <strong>optimisées</strong> pour offrir une expérience utilisateur fluide.
      </p>
      <p>
        Ce qui me distingue ? Une approche <strong>collaborative</strong> et une attention aux détails, afin que chaque projet reflète
        parfaitement votre <strong>vision</strong>. Ensemble, donnons vie à vos idées et transformons-les en une présence en ligne qui fait la différence.
      </p>
    </div>
  </section>
  
  

  <section class="skills" id="skills" aria-labelledby="skills-title">
    <h2 id="skills-title">Mes compétences à votre service</h2>
    <div class="skills-container">
      <article class="skill-card" aria-labelledby="skill-performance">
        <img
          src="/icons/performant.svg"
          alt="Icône représentant la performance"
          loading="lazy"
        />
        <h3 id="skill-performance">Sites Performants</h3>
        <p>
          Créés avec Astro, mes sites chargent rapidement et offrent une excellente
          expérience utilisateur.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-accessibility">
        <img
          src="/icons/accessibility.svg"
          alt="Icône représentant l'accessibilité"
          loading="lazy"
        />
        <h3 id="skill-accessibility">Accessibilité</h3>
        <p>
          Des sites inclusifs, accessibles à tous, respectant les meilleures pratiques
          d'accessibilité.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-mobile-friendly">
        <img
          src="/icons/responsive.svg"
          alt="Icône représentant un smartphone"
          loading="lazy"
        />
        <h3 id="skill-mobile-friendly">Mobile Friendly</h3>
        <p>
          Un design adaptatif qui fonctionne parfaitement sur tous les appareils, des
          téléphones aux écrans larges.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-seo">
        <img
          src="/icons/seo.svg"
          alt="Icône représentant une loupe"
          loading="lazy"
        />
        <h3 id="skill-seo">SEO Optimisé</h3>
        <p>
          Des sites bien référencés, grâce à une structure propre et des optimisations
          adaptées.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-design">
        <img
          src="/icons/design.svg"
          alt="Icône représentant le design moderne"
          loading="lazy"
        />
        <h3 id="skill-design">Design Moderne</h3>
        <p>
          Création d’interfaces esthétiques et intuitives, adaptées aux besoins de vos
          utilisateurs.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-security">
        <img
          src="/icons/security.svg"
          alt="Icône représentant un bouclier"
          loading="lazy"
        />
        <h3 id="skill-security">Sites Sécurisés</h3>
        <p>
          Protection de vos données et de celles de vos utilisateurs grâce aux meilleures
          pratiques en matière de sécurité web.
        </p>
      </article>
    </div>
  </section>
  
  <section class="portfolio" id="portfolio" aria-labelledby="portfolio-title">
    <h2 id="portfolio-title">Découvrez mes dernières réalisations</h2>
    <div class="portfolio-container">
      <article class="project-card" aria-labelledby="project-travaux-title" aria-describedby="project-travaux-description">
        <Image
          src={travauxSisters}
          alt="Mockup du site Travaux Sisters, une plateforme moderne et interactive dédiée à l'empowerment des femmes."
          width={400}
          height={400}
          format="webp"
          loading="lazy"
        />
        <h3 id="project-travaux-title">Travaux Sisters</h3>
        <p id="project-travaux-description">
          Un site moderne et interactif conçu pour une entrepreneuse passionnée, dédiée à accompagner les femmes dans 
          l'apprentissage et la réalisation de travaux personnels. Un projet axé sur l'autonomie et l'empowerment.
        </p>
        <div class="project-links">
          <a 
            href="https://travauxsisters.netlify.app" 
            target="_blank" 
            rel="noopener noreferrer" 
            aria-label="Voir le site Travaux Sisters, une plateforme moderne pour l'empowerment des femmes"
          >
            Voir le site
          </a>
        </div>
      </article>
  
      <article class="project-card" aria-labelledby="project-bhb-title" aria-describedby="project-bhb-description">
        <div class="badge" aria-hidden="true">En cours</div>
        <Image
          src={bhbConseil}
          alt="Mockup du site BHB Conseil, un site vitrine professionnel pour un cabinet de conseil en gestion de patrimoine."
          width={400}
          height={400}
          format="webp"
          loading="lazy"
        />
        <h3 id="project-bhb-title">BHB Conseil</h3>
        <p id="project-bhb-description">
          Un site vitrine professionnel en cours de création pour un cabinet de conseil en gestion de patrimoine et 
          en investissement financier. Conçu pour refléter l’expertise des trois associés et établir une confiance auprès 
          de leurs clients.
        </p>
        <div class="project-links">
          <a 
            href="https://bhbconseil.netlify.app" 
            target="_blank" 
            rel="noopener noreferrer" 
            aria-label="Voir le site BHB Conseil, un site vitrine en cours de création pour un cabinet de conseil"
          >
            Voir le site
          </a>
        </div>
      </article>
    </div>
  </section>
  

  <section class="timeline-section" id="how-i-work" aria-labelledby="timeline-title">
    <h2 id="timeline-title">Ma méthode de travail</h2>
    <div class="timeline">

      <article 
        class="timeline-item" 
        aria-labelledby="step-analyse-title" 
        aria-describedby="step-analyse-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/analyse.png" 
            alt="Analyse des besoins et objectifs du client" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-analyse-title">1. Analyse</h3>
          <p id="step-analyse-description">
            Je commence par une réunion ou une discussion pour comprendre vos besoins, vos objectifs et votre vision.
          </p>
        </div>
      </article>

      <article 
        class="timeline-item" 
        aria-labelledby="step-conception-title" 
        aria-describedby="step-conception-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/design.png" 
            alt="Création de maquettes et prototypes" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-conception-title">2. Conception</h3>
          <p id="step-conception-description">
            Je crée une maquette ou un prototype pour définir la structure et le design de votre projet.
          </p>
        </div>
      </article>

      <article 
        class="timeline-item" 
        aria-labelledby="step-development-title" 
        aria-describedby="step-development-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/development.png" 
            alt="Développement du site web" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-development-title">3. Développement</h3>
          <p id="step-development-description">
            J’écris du code propre et optimisé pour transformer le design en un site web rapide et fonctionnel.
          </p>
        </div>
      </article>

      <article 
        class="timeline-item" 
        aria-labelledby="step-test-title" 
        aria-describedby="step-test-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/test-delivery.png" 
            alt="Tests minutieux et livraison du projet" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-test-title">4. Test & Livraison</h3>
          <p id="step-test-description">
            Je teste minutieusement le projet avant de le mettre en ligne et m’assure qu’il fonctionne parfaitement.
          </p>
        </div>
      </article>
    </div>
  </section>
  
  
  <section class="contact-section" id="contact" aria-labelledby="contact-title">
    <div class="contact-content">
      <h2 id="contact-title">Ensemble, construisons un site moderne et performant</h2>
      <p class="contact-description">
        Parlons de votre projet et donnons-lui vie avec une solution rapide, accessible et à votre image.
      </p>
  
      <!-- Formulaire de contact -->
      <form class="contact-form" name="contact" method="POST" data-netlify="true" aria-labelledby="contact-title">
        <!-- Champ caché pour Netlify -->
        <input type="hidden" name="form-name" value="contact">

        <div class="form-group">
          <label for="name">Nom <span class="required">*</span></label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            placeholder="Votre nom" 
            required 
            aria-required="true" 
            aria-describedby="name-help" 
          />
          <span id="name-help" class="sr-only">Votre nom complet</span>
        </div>

        <div class="form-group">
          <label for="email">Email <span class="required">*</span></label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            placeholder="Votre email" 
            required 
            aria-required="true" 
            aria-describedby="email-help" 
          />
          <span id="email-help" class="sr-only">Votre adresse email</span>
        </div>
  
        <div class="form-group">
          <label for="message">Message <span class="required">*</span></label>
          <textarea 
            id="message" 
            name="message" 
            rows="5" 
            placeholder="Votre message" 
            required 
            aria-required="true" 
            aria-describedby="message-help" 
          ></textarea>
          <span id="message-help" class="sr-only">Votre message détaillé</span>
        </div>
  
        <button type="submit" class="btn-primary" aria-label="Envoyer votre message">Envoyer</button>
      </form>

      <div class="contact-info">
        <p>Vous pouvez aussi m’écrire directement :</p>
        <a href="mailto:gandolfi.guillaume@gmail.com" aria-label="Envoyer un e-mail à Guillaume">
          gandolfi.guillaume@gmail.com
        </a>
      </div>
    </div>
  </section>
  
</BaseLayout>

<script>
  // @ts-nocheck
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('[data-words]').forEach((animatedText) => {
      const words = JSON.parse(animatedText.getAttribute('data-words'));
      let wordIndex = 0;
      let charIndex = 0;
      let isDeleting = false;
  
      function typeEffect() {
        const currentWord = words[wordIndex];
  
        if (charIndex === 0 && !isDeleting) {
          animatedText.style.visibility = "visible";
          animatedText.style.opacity = "1";
        }
  
        if (!isDeleting) {
          animatedText.textContent = currentWord.slice(0, ++charIndex);
          if (charIndex === currentWord.length) {
            isDeleting = true;
            setTimeout(typeEffect, 1000);
            return;
          }
        } else {
          animatedText.textContent = currentWord.slice(0, --charIndex);
          if (charIndex === 0) {
            isDeleting = false;
            wordIndex = (wordIndex + 1) % words.length;
          }
        }
  
        setTimeout(typeEffect, isDeleting ? 100 : 200);
      }
  
      animatedText.textContent = "";
  
      setTimeout(() => {
        typeEffect();
      }, 500);
    });
  });
  
  document.addEventListener('DOMContentLoaded', () => {
    const paragraphs = document.querySelectorAll('.about-container p');
  
    const revealOnScroll = () => {
      const triggerPoint = window.innerHeight / 1.2;
  
      paragraphs.forEach((p) => {
        const top = p.getBoundingClientRect().top;
  
        if (top < triggerPoint) {
          p.classList.add('visible');
        }
      });
    };
  
    window.addEventListener('scroll', revealOnScroll);
  });
  
  document.addEventListener('DOMContentLoaded', () => {
    const items = document.querySelectorAll('.timeline-item');
  
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      },
      { threshold: 0.2 }
    );
  
    items.forEach((item) => observer.observe(item));
  });
  
  // 🔥 Ajout du script pour charger dynamiquement le background après LCP
  document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
      document.body.style.backgroundImage = "url('/textures/black-linen.webp')";
    }, 100); // Délai de 100ms pour prioriser le contenu avant l'image
  });

  document.addEventListener("DOMContentLoaded", () => {
  const paragraphs = document.querySelectorAll(".about-container p");

  if (paragraphs.length > 0) {
    window.addEventListener("scroll", () => {
      const windowHeight = window.innerHeight;

      paragraphs.forEach((p, index) => {
        const rect = p.getBoundingClientRect();
        const distanceFromTop = rect.top;

        // Progression du scroll pour CHAQUE LIGNE (valeur entre 0 et 1)
        let scrollProgress = Math.min(Math.max((windowHeight - distanceFromTop) / windowHeight, 0), 1);

        // Appliquer progressivement l'opacité au scroll
        p.style.opacity = scrollProgress;
      });
    });
  }
});

</script>
