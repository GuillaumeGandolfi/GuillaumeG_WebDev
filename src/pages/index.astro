---
import BaseLayout from '../layouts/BaseLayout.astro';

import { Image } from "astro:assets";
import travauxSisters from "../assets/mockups/travaux_sisters.webp";
import bhbConseil from "../assets/mockups/bhb_conseil.webp";

import '../assets/css/hero.css';
import '../assets/css/about.css';
import '../assets/css/skill.css';
import '../assets/css/portfolio.css';
import '../assets/css/mywork.css';
import '../assets/css/contact.css';
---

<BaseLayout>
  <section class="hero" aria-labelledby="hero-title">
    <div class="hero-container">
      <h1 id="hero-title" class="hero-title">
        Je r√©alise des sites web <span class="highlight">performants</span> et 
        <span class="highlight">optimis√©s</span>,
        <br />
        pour transformer vos id√©es en une <span class="highlight">vitrine </span>professionnelle
        qui <span class="highlight">booste</span> votre visibilit√©.
      </h1>
      <a href="#contact" class="hero-cta" aria-label="Commencez votre projet avec moi" 
      title="D√©marrez votre projet avec un site performant et optimis√©">
        D√©marrez votre projet
      </a>
    </div>
    <div class="hero-background" aria-hidden="true"></div>
  </section>
  
  

  <section class="about-me" id="about" aria-labelledby="about-title">
    <div class="about-container">
      <h2 id="about-title">√Ä Propos de Moi</h2>
      <p>
        Bonjour, je m'appelle <strong>Guillaume</strong>, et je suis passionn√© par le <strong>d√©veloppement web</strong>.
        Mon objectif est simple : concevoir des sites <strong>modernes</strong>, <strong>performants</strong> et <strong>adapt√©s</strong> √† vos besoins.
      </p>
      <p>
        Avec une solide expertise en <em>HTML</em>, <em>CSS</em>, <em>JavaScript</em> et <em>React</em>,
        je mets en ≈ìuvre des solutions web <strong>rapides</strong> et <strong>optimis√©es</strong> pour offrir une exp√©rience utilisateur fluide.
      </p>
      <p>
        Ce qui me distingue‚ÄØ? Une approche <strong>collaborative</strong> et une attention aux d√©tails, afin que chaque projet refl√®te
        parfaitement votre <strong>vision</strong>. Ensemble, donnons vie √† vos id√©es et transformons-les en une pr√©sence en ligne qui fait la diff√©rence.
      </p>
    </div>
  </section>
  
  

  <section class="skills" id="skills" aria-labelledby="skills-title">
    <h2 id="skills-title">Mes comp√©tences √† votre service</h2>
    <div class="skills-container">
      <article class="skill-card" aria-labelledby="skill-performance">
        <img
          src="/icons/performant.svg"
          alt="Ic√¥ne repr√©sentant la performance"
          loading="lazy"
        />
        <h3 id="skill-performance">Sites Performants</h3>
        <p>
          Cr√©√©s avec Astro, mes sites chargent rapidement et offrent une excellente
          exp√©rience utilisateur.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-accessibility">
        <img
          src="/icons/accessibility.svg"
          alt="Ic√¥ne repr√©sentant l'accessibilit√©"
          loading="lazy"
        />
        <h3 id="skill-accessibility">Accessibilit√©</h3>
        <p>
          Des sites inclusifs, accessibles √† tous, respectant les meilleures pratiques
          d'accessibilit√©.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-mobile-friendly">
        <img
          src="/icons/responsive.svg"
          alt="Ic√¥ne repr√©sentant un smartphone"
          loading="lazy"
        />
        <h3 id="skill-mobile-friendly">Mobile Friendly</h3>
        <p>
          Un design adaptatif qui fonctionne parfaitement sur tous les appareils, des
          t√©l√©phones aux √©crans larges.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-seo">
        <img
          src="/icons/seo.svg"
          alt="Ic√¥ne repr√©sentant une loupe"
          loading="lazy"
        />
        <h3 id="skill-seo">SEO Optimis√©</h3>
        <p>
          Des sites bien r√©f√©renc√©s, gr√¢ce √† une structure propre et des optimisations
          adapt√©es.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-design">
        <img
          src="/icons/design.svg"
          alt="Ic√¥ne repr√©sentant le design moderne"
          loading="lazy"
        />
        <h3 id="skill-design">Design Moderne</h3>
        <p>
          Cr√©ation d‚Äôinterfaces esth√©tiques et intuitives, adapt√©es aux besoins de vos
          utilisateurs.
        </p>
      </article>
      <article class="skill-card" aria-labelledby="skill-security">
        <img
          src="/icons/security.svg"
          alt="Ic√¥ne repr√©sentant un bouclier"
          loading="lazy"
        />
        <h3 id="skill-security">Sites S√©curis√©s</h3>
        <p>
          Protection de vos donn√©es et de celles de vos utilisateurs gr√¢ce aux meilleures
          pratiques en mati√®re de s√©curit√© web.
        </p>
      </article>
    </div>
  </section>
  
  <section class="portfolio" id="portfolio" aria-labelledby="portfolio-title">
    <h2 id="portfolio-title">D√©couvrez mes derni√®res r√©alisations</h2>
    <div class="portfolio-container">
      <article class="project-card" aria-labelledby="project-travaux-title" aria-describedby="project-travaux-description">
        <Image
          src={travauxSisters}
          alt="Mockup du site Travaux Sisters, une plateforme moderne et interactive d√©di√©e √† l'empowerment des femmes."
          width={400}
          height={400}
          format="webp"
          loading="lazy"
        />
        <h3 id="project-travaux-title">Travaux Sisters</h3>
        <p id="project-travaux-description">
          Un site moderne et interactif con√ßu pour une entrepreneuse passionn√©e, d√©di√©e √† accompagner les femmes dans 
          l'apprentissage et la r√©alisation de travaux personnels. Un projet ax√© sur l'autonomie et l'empowerment.
        </p>
        <div class="project-links">
          <a 
            href="https://travauxsisters.netlify.app" 
            target="_blank" 
            rel="noopener noreferrer" 
            aria-label="Voir le site Travaux Sisters, une plateforme moderne pour l'empowerment des femmes"
          >
            Voir le site
          </a>
        </div>
      </article>
  
      <article class="project-card" aria-labelledby="project-bhb-title" aria-describedby="project-bhb-description">
        <div class="badge" aria-hidden="true">En cours</div>
        <Image
          src={bhbConseil}
          alt="Mockup du site BHB Conseil, un site vitrine professionnel pour un cabinet de conseil en gestion de patrimoine."
          width={400}
          height={400}
          format="webp"
          loading="lazy"
        />
        <h3 id="project-bhb-title">BHB Conseil</h3>
        <p id="project-bhb-description">
          Un site vitrine professionnel en cours de cr√©ation pour un cabinet de conseil en gestion de patrimoine et 
          en investissement financier. Con√ßu pour refl√©ter l‚Äôexpertise des trois associ√©s et √©tablir une confiance aupr√®s 
          de leurs clients.
        </p>
        <div class="project-links">
          <a 
            href="https://bhbconseil.netlify.app" 
            target="_blank" 
            rel="noopener noreferrer" 
            aria-label="Voir le site BHB Conseil, un site vitrine en cours de cr√©ation pour un cabinet de conseil"
          >
            Voir le site
          </a>
        </div>
      </article>
    </div>
  </section>
  

  <section class="timeline-section" id="how-i-work" aria-labelledby="timeline-title">
    <h2 id="timeline-title">Ma m√©thode de travail</h2>
    <div class="timeline">

      <article 
        class="timeline-item" 
        aria-labelledby="step-analyse-title" 
        aria-describedby="step-analyse-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/analyse.png" 
            alt="Analyse des besoins et objectifs du client" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-analyse-title">1. Analyse</h3>
          <p id="step-analyse-description">
            Je commence par une r√©union ou une discussion pour comprendre vos besoins, vos objectifs et votre vision.
          </p>
        </div>
      </article>

      <article 
        class="timeline-item" 
        aria-labelledby="step-conception-title" 
        aria-describedby="step-conception-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/design.png" 
            alt="Cr√©ation de maquettes et prototypes" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-conception-title">2. Conception</h3>
          <p id="step-conception-description">
            Je cr√©e une maquette ou un prototype pour d√©finir la structure et le design de votre projet.
          </p>
        </div>
      </article>

      <article 
        class="timeline-item" 
        aria-labelledby="step-development-title" 
        aria-describedby="step-development-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/development.png" 
            alt="D√©veloppement du site web" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-development-title">3. D√©veloppement</h3>
          <p id="step-development-description">
            J‚Äô√©cris du code propre et optimis√© pour transformer le design en un site web rapide et fonctionnel.
          </p>
        </div>
      </article>

      <article 
        class="timeline-item" 
        aria-labelledby="step-test-title" 
        aria-describedby="step-test-description"
      >
        <div class="timeline-dot">
          <img 
            src="/icons/test-delivery.png" 
            alt="Tests minutieux et livraison du projet" 
            class="timeline-icon" 
            loading="lazy" 
          />
        </div>
        <div class="timeline-content">
          <h3 id="step-test-title">4. Test & Livraison</h3>
          <p id="step-test-description">
            Je teste minutieusement le projet avant de le mettre en ligne et m‚Äôassure qu‚Äôil fonctionne parfaitement.
          </p>
        </div>
      </article>
    </div>
  </section>
  
  
  <section class="contact-section" id="contact" aria-labelledby="contact-title">
    <div class="contact-content">
      <h2 id="contact-title">Ensemble, construisons un site moderne et performant</h2>
      <p class="contact-description">
        Parlons de votre projet et donnons-lui vie avec une solution rapide, accessible et √† votre image.
      </p>
  
      <!-- Formulaire de contact -->
      <form class="contact-form" name="contact" method="POST" data-netlify="true" aria-labelledby="contact-title">
        <!-- Champ cach√© pour Netlify -->
        <input type="hidden" name="form-name" value="contact">

        <div class="form-group">
          <label for="name">Nom <span class="required">*</span></label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            placeholder="Votre nom" 
            required 
            aria-required="true" 
            aria-describedby="name-help" 
          />
          <span id="name-help" class="sr-only">Votre nom complet</span>
        </div>

        <div class="form-group">
          <label for="email">Email <span class="required">*</span></label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            placeholder="Votre email" 
            required 
            aria-required="true" 
            aria-describedby="email-help" 
          />
          <span id="email-help" class="sr-only">Votre adresse email</span>
        </div>
  
        <div class="form-group">
          <label for="message">Message <span class="required">*</span></label>
          <textarea 
            id="message" 
            name="message" 
            rows="5" 
            placeholder="Votre message" 
            required 
            aria-required="true" 
            aria-describedby="message-help" 
          ></textarea>
          <span id="message-help" class="sr-only">Votre message d√©taill√©</span>
        </div>
  
        <button type="submit" class="btn-primary" aria-label="Envoyer votre message">Envoyer</button>
      </form>

      <div class="contact-info">
        <p>Vous pouvez aussi m‚Äô√©crire directement :</p>
        <a href="mailto:gandolfi.guillaume@gmail.com" aria-label="Envoyer un e-mail √† Guillaume">
          gandolfi.guillaume@gmail.com
        </a>
      </div>
    </div>
  </section>
  
</BaseLayout>

<script>
  // @ts-nocheck
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('[data-words]').forEach((animatedText) => {
      const words = JSON.parse(animatedText.getAttribute('data-words'));
      let wordIndex = 0;
      let charIndex = 0;
      let isDeleting = false;
  
      function typeEffect() {
        const currentWord = words[wordIndex];
  
        if (charIndex === 0 && !isDeleting) {
          animatedText.style.visibility = "visible";
          animatedText.style.opacity = "1";
        }
  
        if (!isDeleting) {
          animatedText.textContent = currentWord.slice(0, ++charIndex);
          if (charIndex === currentWord.length) {
            isDeleting = true;
            setTimeout(typeEffect, 1000);
            return;
          }
        } else {
          animatedText.textContent = currentWord.slice(0, --charIndex);
          if (charIndex === 0) {
            isDeleting = false;
            wordIndex = (wordIndex + 1) % words.length;
          }
        }
  
        setTimeout(typeEffect, isDeleting ? 100 : 200);
      }
  
      animatedText.textContent = "";
  
      setTimeout(() => {
        typeEffect();
      }, 500);
    });
  });
  
  document.addEventListener('DOMContentLoaded', () => {
    const paragraphs = document.querySelectorAll('.about-container p');
  
    const revealOnScroll = () => {
      const triggerPoint = window.innerHeight / 1.2;
  
      paragraphs.forEach((p) => {
        const top = p.getBoundingClientRect().top;
  
        if (top < triggerPoint) {
          p.classList.add('visible');
        }
      });
    };
  
    window.addEventListener('scroll', revealOnScroll);
  });
  
  document.addEventListener('DOMContentLoaded', () => {
    const items = document.querySelectorAll('.timeline-item');
  
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      },
      { threshold: 0.2 }
    );
  
    items.forEach((item) => observer.observe(item));
  });
  
  // üî• Ajout du script pour charger dynamiquement le background apr√®s LCP
  document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
      document.body.style.backgroundImage = "url('/textures/black-linen.webp')";
    }, 100); // D√©lai de 100ms pour prioriser le contenu avant l'image
  });

  document.addEventListener("DOMContentLoaded", () => {
  const paragraphs = document.querySelectorAll(".about-container p");

  if (paragraphs.length > 0) {
    window.addEventListener("scroll", () => {
      const windowHeight = window.innerHeight;

      paragraphs.forEach((p, index) => {
        const rect = p.getBoundingClientRect();
        const distanceFromTop = rect.top;

        // Progression du scroll pour CHAQUE LIGNE (valeur entre 0 et 1)
        let scrollProgress = Math.min(Math.max((windowHeight - distanceFromTop) / windowHeight, 0), 1);

        // Appliquer progressivement l'opacit√© au scroll
        p.style.opacity = scrollProgress;
      });
    });
  }
});

</script>
